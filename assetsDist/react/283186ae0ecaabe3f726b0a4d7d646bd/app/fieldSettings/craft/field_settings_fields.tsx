"use strict";var __extends=function(){var e=function(t,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},e(t,a)};return function(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),Field=function(e){var t=e.label,a=e.handle,n=e.type,l=e.require;this.label=void 0!==t?t:"",this.handle=void 0!==a?a:"",this.type=void 0!==n?n:"",this.require=Boolean(l)},FieldSettingsFields=function(e){function t(t){var a=t.templateInput,n=e.call(this,{})||this;return n.inputNameBase=a.name,n.state={fields:[]},n.addField=n.addField.bind(n),n.deleteField=n.deleteField.bind(n),n.updateLabel=n.updateLabel.bind(n),n.updateHandle=n.updateHandle.bind(n),n.updateType=n.updateType.bind(n),n.updateRequire=n.updateRequire.bind(n),n}return __extends(t,e),t.prototype.addField=function(){var e=this.state.fields;e.push(new Field({require:!0})),this.setState({fields:e})},t.prototype.deleteField=function(e){var t=this.state.fields;t.splice(parseInt(e.currentTarget.dataset.index),1),this.setState({fields:t})},t.prototype.updateLabel=function(e){var t=parseInt(e.currentTarget.dataset.index),a=this.state.fields;a[t].label=String(e.currentTarget.value),this.setState({fields:a})},t.prototype.updateHandle=function(e){var t=parseInt(e.currentTarget.dataset.index),a=this.state.fields;a[t].handle=String(e.currentTarget.value),this.setState({fields:a})},t.prototype.updateType=function(e){var t=parseInt(e.currentTarget.dataset.index),a=this.state.fields;a[t].type=String(e.currentTarget.value),this.setState({fields:a})},t.prototype.updateRequire=function(e){var t=parseInt(e.currentTarget.dataset.index),a=this.state.fields;a[t].require=!a[t].require,this.setState({fields:a})},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"field"},React.createElement("div",{className:"heading"},React.createElement("label",null,"Custom Fields")),React.createElement("div",{className:"input ltr"},React.createElement("input",{type:"hidden",name:"".concat(this.inputNameBase,"[]"),value:""}),React.createElement("table",{className:"editable fullwidth"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{scope:"col",className:"singleline-cell textual"},"Label"),React.createElement("th",{scope:"col",className:"singleline-cell textual"},"Handle"),React.createElement("th",{scope:"col",className:"singleline-cell textual"},"Type"),React.createElement("th",{scope:"col",className:"singleline-cell textual"},"Require"),React.createElement("th",{colSpan:2}))),React.createElement("tbody",null,this.state.fields.map((function(t,a){return React.createElement("tr",null,React.createElement("td",{className:"singleline-cell textual"},React.createElement("textarea",{onChange:e.updateLabel,name:"".concat(e.inputNameBase,"[").concat(a,"][label]"),rows:1,style:{minHeight:"34px",boxShadow:"none"},value:t.label,"data-index":a,className:"focus:outline-none"})),React.createElement("td",{className:"code singleline-cell textual"},React.createElement("textarea",{onChange:e.updateHandle,name:"".concat(e.inputNameBase,"[").concat(a,"][handle]"),rows:1,style:{minHeight:"34px",boxShadow:"none"},value:t.handle,"data-index":a})),React.createElement("td",{className:"singleline-cell textual"},React.createElement("div",{className:"input ltr p-2"},React.createElement("div",{className:"select"},React.createElement("select",{onChange:e.updateType,name:"".concat(e.inputNameBase,"[").concat(a,"][type]"),"data-index":a},React.createElement("option",{value:"text",selected:"text"===t.type},"Text"),React.createElement("option",{value:"bool",selected:"bool"===t.type},"Light Switch"))))),React.createElement("td",{className:"thin checkbox-cell"},React.createElement("div",{className:"checkbox-wrapper"},React.createElement("input",{type:"hidden",name:"".concat(e.inputNameBase,"[").concat(a,"][required]"),value:""}),React.createElement("input",{onChange:e.updateRequire,id:"checkbox"+a,type:"checkbox",className:"checkbox",name:"".concat(e.inputNameBase,"[").concat(a,"][required]"),value:"1",checked:t.require,"data-index":a}),React.createElement("label",{htmlFor:"checkbox"+a}))),React.createElement("td",{className:"thin action"},React.createElement("a",{className:"move icon",title:"Reorder","aria-label":"Reorder"})),React.createElement("td",{className:"thin action"},React.createElement("a",{onClick:e.deleteField,"data-index":a,className:"delete icon",title:"Delete","aria-label":"Delete"})))})))),React.createElement("button",{onClick:this.addField,type:"button",className:"btn add icon",tabIndex:0,style:{opacity:1,pointerEvents:"auto"}},"Add a field")))},t}(React.Component),fieldSettingsFieldsContainer=document.getElementsByClassName("field_settings_fields").item(0),templateInput=fieldSettingsFieldsContainer.getElementsByClassName("custom_fields").item(0);ReactDOM.render(React.createElement(FieldSettingsFields,{templateInput:templateInput}),fieldSettingsFieldsContainer);