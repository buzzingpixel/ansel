function runChoice(){$(".js-treasury-choice-wrapper").each(function(){var a=$(this);a.find(".js-treasury-choice-input").on("change",function(){var b=$(this);a.find(".js-treasury-choice-label").removeClass("chosen"),b.closest(".js-treasury-choice-label").addClass("chosen")})})}window.TREASURY=window.TREASURY||{},window.TREASURY.exec=window.TREASURY.exec||[],window.TREASURY.vars=window.TREASURY.vars||{},window.TREASURY.varEvents=window.TREASURY.varEvents||{},function(a,b){"use strict";var c=function(a){var c,d=b.getElementsByTagName("head")[0],e=a.root||"/",f="string"==typeof a.js?[a.js]:a.js,g="string"==typeof a.css?[a.css]:a.css,h=a.async===!0,i=0,j=!1,k=function(){0===i&&(j&&"function"==typeof a.failure?a.failure():j||"function"!=typeof a.success||a.success())};for(c in f)f.hasOwnProperty(c)&&i++;for(c in g)g.hasOwnProperty(c)&&i++;for(c in f)if(f.hasOwnProperty(c)){var l=b.createElement("script");l.async=h===!0,l.onload=function(){i--,k()},l.onerror=function(){i--,j=!0,k()},l.src=e+f[c],d.appendChild(l)}for(c in g)if(g.hasOwnProperty(c)){var m=b.createElement("link");m.addEventListener("load",function(){i--,k()},!1),m.addEventListener("error",function(){i--,j=!0,k()},!1),m.rel="stylesheet",m.href=e+g[c],d.appendChild(m)}};a.assets={load:function(a){new c(a)}}}(window.TREASURY,document),function(a){"use strict";var b=function(b){return b.vars={},b.varEvents={},b.set=function(c,d){a.set(c,d,b)},b.triggerChange=function(c){a.triggerChange(c,b)},b.get=function(c,d){return a.get(c,d,b)},b.on=function(c,d){a.on(c,d,b)},b.off=function(c){a.off(c,b)},b};a.fn={made:{},autoInit:[],make:function(c,d){d.autoInit===!0&&a.fn.autoInit.push(c),d=b(d),a.fn.made[c]=$.extend(!0,{},d),a[c]=d},clone:function(c,d){var e=$.extend(!0,{},a.fn.made[c]);return e=b(e),d===!0&&(Array.prototype.shift.apply(arguments),Array.prototype.shift.apply(arguments),e.init.apply(e,arguments)),e}}}(window.TREASURY),function(a){"use strict";var b=function(){$("[data-set]").each(function(){var b=$(this),c=b.data("set"),d=b.data("value"),e=c.slice(-2),f=c.slice(0,-2);"[]"===e?(a.vars[f]||(a.vars[f]=[]),a.vars[f].push(d)):"{}"===e?(d=d.split(":"),a.vars[f]||(a.vars[f]={}),a.vars[f][d[0]]=d[1]):a.vars[c]=d}),a.set=function(b,c,d){var e,f;if(d=d||a,e=a.get(b,null,d),d.vars[b]=c,e!==c){if(d.varEvents.global)for(f in d.varEvents.global)d.varEvents.global[f].forEach(function(a){a(c,e)});if(d.varEvents[b])for(f in d.varEvents[b])d.varEvents[b][f].forEach(function(a){a(c,e)})}},a.triggerChange=function(b,c){var d;c=c||a,d=c.get(b),c.vars[b]=null,c.set(b,d)},a.get=function(b,c,d){return d=d||a,null!==d.vars[b]&&void 0!==d.vars[b]?d.vars[b]:c||null},a.on=function(b,c,d){var e,f,g,h;d=d||a,h=b.split("."),g=h[1]||"noNamespace",h=h[0].split(":"),e=h[0],f=h[1]||"global","change"===e&&(d.varEvents[f]||(d.varEvents[f]={}),d.varEvents[f][g]||(d.varEvents[f][g]=[]),d.varEvents[f][g].push(c))},a.off=function(b,c){var d,e,f,g;c=c||a,g=b.split("."),f=g[1]||"noNamespace",g=g[0].split(":"),d=g[0],e=g[1]||"global",c.varEvents[e]&&c.varEvents[e][f]&&delete c.varEvents[e][f]},$("[data-exec]").each(function(){var b=$(this).data("exec");b&&a.exec.indexOf(b)===-1&&a.exec.push(b)})};$(function(){b()})}(window.TREASURY),function(a){"use strict";var b=function(){var c=[];if(!a.ready)return void setTimeout(function(){b()},100);if(a.fn.autoInit.forEach(function(b){a[b].init(),c.push(b)}),a.exec.forEach(function(b){c.indexOf(b)<0&&(a[b].init(),c.push(b))}),a.controller){var d=a.controller[a.get("pageType")];d&&d.forEach(function(b){c.indexOf(b)<0&&(a[b].init(),c.push(b))})}};$(function(){b()})}(window.TREASURY),function(a){a.fn.jsHide=function(){return this.addClass("js-hide"),this},a.fn.jsShow=function(){return this.removeClass("js-hide"),this}}(window.jQuery),Array.prototype.filterUnique=function(){var a=[],b=this;return b.forEach(function(c,d){a.indexOf(c)<0?a.push(c):b.splice(d,1)}),b},Array.prototype.getUnique=function(){var a=[];return this.forEach(function(b){a.indexOf(b)<0&&a.push(b)}),a},Array.prototype.pushUnique=function(){for(var a=0;a<arguments.length;++a)this.indexOf(arguments[a])<0&&this.push(arguments[a]);return this},String.prototype.toCamelCase=function(){return this.toLowerCase().replace(/[-_]+/g," ").replace(/[^\w\s]/g,"").replace(/ (.)/g,function(a){return a.toUpperCase()}).replace(/ /g,"")},function(a){"use strict";a.controller={locations:["imageBulkDelete"],editLocations:["addLocationType","slugGenerate"],fileField:["fileFieldInit"]}}(window.TREASURY),function(a){"use strict";a.fn.make("addLocationType",{$typeSelector:null,$typeFields:null,init:function(){var a=this;a.$typeSelector=$(".js-type-selector"),a.$typeFields=$(".js-type-fields"),a.set("current",a.$typeFields.data("current")),a.$typeSelector.on("change",function(){a.set("current",this.value),a.$typeFields.data("current",this.value)}),a.on("change:current",function(b){a.$typeFields.html($("#template__"+b+"__fields").html())})}})}(window.TREASURY),function(a){"use strict";a.fn.make("bulkFileActions",{autoInit:!0,tries:0,init:function(){$("body").on("change",".js-treasury-blk-action",function(){var a=$(this);$(".js-treasury-blk-action").not(a).val(a.val())}),$("body").on("click",".js-top-blk-action-btn",function(){$(".js-bulk-actions-form").submit()})}})}(window.TREASURY),runChoice(),function(a){"use strict";a.fn.make("fileField",{$el:null,$btn:null,$thumb:null,$thumbWrapper:null,init:function(a){var b=this;b.$el=a,b.$btn=a.find(".js-treasury-file-field-add"),b.$thumbWrapper=a.find(".js-thumb-wrapper"),b.$thumb=a.find(".js-image-thumb"),b.$input=a.find(".js-treasury-file-input"),b.$btn.TreasuryFilePicker({callback:function(a){b.fileSelected(a)}}),a.find(".js-thumb-delete").on("click",function(){b.fileRemoved()})},fileSelected:function(a){var b=this,c=new Image;c.src=a.thumb_url,b.$input.val(a.id).trigger("change"),b.$thumb.html(c),b.$thumbWrapper.jsShow(),b.$btn.jsHide()},fileRemoved:function(){var a=this;a.$input.val("").trigger("change"),a.$thumbWrapper.jsHide(),a.$btn.jsShow()}})}(window.TREASURY),function(a,b,c){"use strict";a.fn.make("fileFieldInit",{init:function(){$(".js-treasury-file-field").not(".js-is-grid").each(function(){a.fn.clone("fileField",!0,$(this))}),b.bind("treasury_file","display",function(b){b.find(".js-treasury-file-field").each(function(){a.fn.clone("fileField",!0,$(this))})}),void 0!==c&&c.on("treasury_file","add",function(b){b.find(".js-treasury-file-field").each(function(){a.fn.clone("fileField",!0,$(this))})})}})}(window.TREASURY,window.Grid,window.FluidField),function(a){"use strict";var b,c,d=function(){$(".js-treasury-filepicker").each(function(){var b=$(this);b.data("treasuryPickerInit")||a.filePicker.addTrigger(this),b.data("treasuryPickerInit",!0)})};$.fn.TreasuryFilePicker=function(a){a=a||{},this.each(function(){this.TreasuryFilePickerCallback=a.callback})},a.fn.make("filePicker",{$btn:null,href:null,addTrigger:function(b){a.fn.clone("filePicker",!0,$(b))},init:function(a){var b=this;b.$btn=a,b.href=b.$btn.attr("href"),b.$btn.on("click.treasury",function(){b.getHtml()}),setTimeout(function(){b.$btn.off("click.treasury"),b.$btn.on("click",function(){b.getHtml()})},100),setTimeout(function(){b.$btn.off("click.treasury"),b.$btn.on("click",function(){b.getHtml()})},500)},getHtml:function(a){var b=this;a=a||this.href,$.ajax({url:a,success:function(a){b.render(a)}})},render:function(a){var c=this,d=$(a);d.on("click","[href]",function(a){var b=$(this);a.preventDefault(),b.hasClass("has-sub")?b.siblings(".sub-menu").toggle():c.getHtml(b.attr("href"))}),d.on("submit",".js-file-search",function(a){var b=$(this),d=new FormData(b.get(0)),e=b.find(".btn");a.preventDefault(),e.addClass("work"),$.ajax({url:b.attr("action"),type:"POST",data:d,cache:!1,contentType:!1,processData:!1,beforeSend:function(a){a.setRequestHeader("X-Requested-With",{toString:function(){return""}})},success:function(a){c.render(a)}})}),d.on("submit",".js-upload-file",function(a){var d=$(this),e=new FormData(d.get(0)),f=d.find(".btn");a.preventDefault(),f.val(f.data("workText")).addClass("work"),$.ajax({url:d.attr("action"),type:"POST",data:e,cache:!1,contentType:!1,processData:!1,beforeSend:function(a){a.setRequestHeader("X-Requested-With",{toString:function(){return""}})},success:function(a){a.hasErrors===!0?c.getHtml(a.loadUrl):(c.runCallback(a.loadUrl),b.find(".m-close").click())}})}),d.on("click",".js-file-row",function(){var a=$(this);a.data("wasSelected")||(a.data("wasSelected",!0),c.runCallback(a.data("fileJsonHref")),b.find(".m-close").click())}),b.find(".box").replaceWith(d)},runCallback:function(a){var b=this,c=b.$btn.get(0).TreasuryFilePickerCallback;c&&$.ajax({url:a,dataType:"json",success:function(a){c(a)}})}}),$(function(){$.each(["show","hide"],function(a,b){var c=$.fn[b];$.fn[b]=function(){return this.trigger(b),c.apply(this,arguments)}}),b=$(".js-treasury-file-picker-modal"),d(),document.addEventListener("DOMSubtreeModified",function(){clearTimeout(c),c=setTimeout(function(){d()},250)},!1),b.on("hide",function(){b.find(".box").html("")})})}(window.TREASURY),function(a){"use strict";a.fn.make("imageBulkDelete",{init:function(){$("body").on("change",".js-image-bulk-select",function(){var a=!1;$(".js-image-bulk-select").each(function(){if(this.checked)return a=!0,!1}),a?$(".js-image-bulk-actions").jsShow():$(".js-image-bulk-actions").jsHide()})}})}(window.TREASURY),$(document).ready(function(){$(".sidebar .folder-list .remove a.m-link").click(function(a){var b=$(this),c="."+$(this).attr("rel");$(c+" .checklist").html(""),$(c+" .checklist").append("<li>"+b.data("confirm")+"</li>"),$(c+' input[name="id"]').val(b.data("id")),a.preventDefault()})}),function(a){"use strict";a.fn.make("slugGenerate",{init:function(){var a=this,b=$(".js-auto-slug-title"),c=$(".js-auto-slug-slug");(b.length||c.length)&&b.on("keyup change focusout",function(){c.val(a.slugify(b.val()))})},slugify:function(a){return a.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}})}(window.TREASURY),$(function(){window.TREASURY.ready=!0}),$(function(){window.TREASURY=window.TREASURY||{},window.TREASURY.version="0.19.0"});
//# sourceMappingURL=script.min.js.map